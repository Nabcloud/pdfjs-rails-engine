;function getFileName(e){var t=e.indexOf("#");var n=e.indexOf("?");var r=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",r)+1,r)}function getOutputScale(e){var t=window.devicePixelRatio||1;var n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;var r=t/n;return{sx:r,sy:r,scaled:r!=1}}function scrollIntoView(e,t){var n=e.offsetParent;var r=e.offsetTop+e.clientTop;if(!n){console.error("offsetParent is not set -- cannot scroll");return}while(n.clientHeight==n.scrollHeight){r+=n.offsetTop;n=n.offsetParent;if(!n)return}if(t)r+=t.top;n.scrollTop=r}function noContextMenuHandler(e){e.preventDefault()}function getPDFFileNameFromURL(e){var t=/^(?:([^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;var n=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i;var r=t.exec(e);var i=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(i){i=i[0];if(i.indexOf("%")!=-1){try{i=n.exec(decodeURIComponent(i))[0]}catch(s){}}}return i||"document.pdf"}function updateViewarea(){if(!PDFView.initialized)return;var e=PDFView.getVisiblePages();var t=e.views;if(t.length===0){return}PDFView.renderHighestPriority();var n=PDFView.page;var r=e.first;for(var i=0,s=t.length,o=false;i<s;++i){var u=t[i];if(u.percent<100)break;if(u.id===PDFView.page){o=true;break}}if(!o){n=t[0].id}updateViewarea.inProgress=true;PDFView.page=n;updateViewarea.inProgress=false;var a=PDFView.currentScale;var f=PDFView.currentScaleValue;var l=f==a?a*100:f;var c=r.id;var h="#page="+c;h+="&zoom="+l;var p=PDFView.pages[c-1];var d=p.getPagePoint(PDFView.container.scrollLeft,PDFView.container.scrollTop-r.y);h+=","+Math.round(d[0])+","+Math.round(d[1]);var v=PDFView.store;v.initializedPromise.then(function(){v.set("exists",true);v.set("page",c);v.set("zoom",l);v.set("scrollLeft",Math.round(d[0]));v.set("scrollTop",Math.round(d[1]))});var m=PDFView.getAnchorUrl(h);document.getElementById("viewBookmark").href=m;document.getElementById("secondaryViewBookmark").href=m;PDFHistory.updateCurrentBookmark(h,c)}function selectScaleOption(e){var t=document.getElementById("scaleSelect").options;var n=false;for(var r=0;r<t.length;r++){var i=t[r];if(i.value!=e){i.selected=false;continue}i.selected=true;n=true}return n}var DEFAULT_URL="compressed.tracemonkey-pldi-09.pdf";var DEFAULT_SCALE="auto";var DEFAULT_SCALE_DELTA=1.1;var UNKNOWN_SCALE=0;var CACHE_SIZE=20;var CSS_UNITS=96/72;var SCROLLBAR_PADDING=40;var VERTICAL_PADDING=5;var MIN_SCALE=.25;var MAX_SCALE=4;var SETTINGS_MEMORY=20;var SCALE_SELECT_CONTAINER_PADDING=8;var SCALE_SELECT_PADDING=22;var THUMBNAIL_SCROLL_MARGIN=-19;var USE_ONLY_CSS_ZOOM=false;var RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};var FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3};PDFJS.imageResourcesPath="./images/";PDFJS.workerSrc="/assets/pdf/pdf.worker.min.js";var mozL10n=document.mozL10n||document.webL10n;var CustomStyle=function(){function r(){}var t=["ms","Moz","Webkit","O"];var n={};r.getProp=function(r,i){if(arguments.length==1&&typeof n[r]=="string"){return n[r]}i=i||document.documentElement;var s=i.style,o,u;if(typeof s[r]=="string"){return n[r]=r}u=r.charAt(0).toUpperCase()+r.slice(1);for(var a=0,f=t.length;a<f;a++){o=t[a]+u;if(typeof s[o]=="string"){return n[r]=o}}return n[r]="undefined"};r.setProp=function(t,n,r){var i=this.getProp(t);if(i!="undefined")n.style[i]=r};return r}();var ProgressBar=function(){function t(e,t,n){return Math.min(Math.max(e,t),n)}function n(e,t){this.div=document.querySelector(e+" .progress");this.bar=this.div.parentNode;this.height=t.height||100;this.width=t.width||100;this.units=t.units||"%";this.div.style.height=this.height+this.units;this.percent=0}n.prototype={updateBar:function(){if(this._indeterminate){this.div.classList.add("indeterminate");this.div.style.width=this.width+this.units;return}this.div.classList.remove("indeterminate");var t=this.width*this._percent/100;this.div.style.width=t+this.units},get percent(){return this._percent},set percent(e){this._indeterminate=isNaN(e);this._percent=t(e,0,100);this.updateBar()},setWidth:function(t){if(t){var n=t.parentNode;var r=n.offsetWidth-t.offsetWidth;if(r>0){this.bar.setAttribute("style","width: calc(100% - "+r+"px);")}}},hide:function(){this.bar.classList.add("hidden");this.bar.removeAttribute("style")}};return n}();var Cache=function(t){var n=[];this.push=function(r){var i=n.indexOf(r);if(i>=0)n.splice(i);n.push(r);if(n.length>t)n.shift().destroy()}};(function(){function i(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,false,false,"custom");window.dispatchEvent(t)}function s(){if(!t){return}u();if(++n<t.length){var e=t[n];if(typeof e.mozPrintCallback==="function"){e.mozPrintCallback({context:e.getContext("2d"),abort:o,done:s})}else{s()}}else{u();r.call(window);setTimeout(o,20)}}function o(){if(t){t=null;u();i("afterprint")}}function u(){var e=document.getElementById("mozPrintCallback-shim");if(t){var r=Math.round(100*n/t.length);var i=e.querySelector("progress");var s=e.querySelector(".relative-progress");i.value=r;s.textContent=r+"%";e.removeAttribute("hidden");e.onclick=o}else{e.setAttribute("hidden","")}}if("mozPrintCallback"in document.createElement("canvas")){return}HTMLCanvasElement.prototype.mozPrintCallback=undefined;var t;var n;var r=window.print;window.print=function(){if(t){console.warn("Ignored window.print() because of a pending print job.");return}try{i("beforeprint")}finally{t=document.querySelectorAll("canvas");n=-1;s()}};var a=!!document.attachEvent;window.addEventListener("keydown",function(e){if(e.keyCode===80&&(e.ctrlKey||e.metaKey)){window.print();if(a){return}e.preventDefault();if(e.stopImmediatePropagation){e.stopImmediatePropagation()}else{e.stopPropagation()}return}if(e.keyCode===27&&t){o()}},true);if(a){document.attachEvent("onkeydown",function(e){e=e||window.event;if(e.keyCode===80&&e.ctrlKey){e.keyCode=0;return false}})}if("onbeforeprint"in window){var f=function(e){if(e.detail!=="custom"&&e.stopImmediatePropagation){e.stopImmediatePropagation()}};window.addEventListener("beforeprint",f,false);window.addEventListener("afterprint",f,false)}})();var DownloadManager=function(){function t(e,t){var n=document.createElement("a");if(n.click){n.href=e;n.target="_parent";if("download"in n){n.download=t}(document.body||document.documentElement).appendChild(n);n.click();n.parentNode.removeChild(n)}else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var r=e.indexOf("?")===-1?"?":"&";e=e.replace(/#|$/,r+"$&")}window.open(e,"_parent")}}function n(){}n.prototype={downloadUrl:function(n,r){if(!PDFJS.isValidUrl(n,true)){return}t(n+"#pdfjs.action=download",r)},download:function(n,r,i){if(!URL){this.downloadUrl(r,i);return}if(navigator.msSaveBlob){if(!navigator.msSaveBlob(n,i)){this.downloadUrl(r,i)}return}var s=URL.createObjectURL(n);t(s,i)}};return n}();var cache=new Cache(CACHE_SIZE);var currentPageNumber=1;var Settings=function(){function n(e){this.fingerprint=e;this.initializedPromise=new PDFJS.Promise;var n=function(t){this.initialize(t||"{}");this.initializedPromise.resolve()}.bind(this);if(t){n(localStorage.getItem("database"))}}var t=function(){try{return"localStorage"in window&&window["localStorage"]!==null&&localStorage}catch(t){return false}}();n.prototype={initialize:function(t){t=JSON.parse(t);if(!("files"in t)){t.files=[]}if(t.files.length>=SETTINGS_MEMORY){t.files.shift()}var n;for(var r=0,i=t.files.length;r<i;r++){var s=t.files[r];if(s.fingerprint===this.fingerprint){n=r;break}}if(typeof n!=="number"){n=t.files.push({fingerprint:this.fingerprint})-1}this.file=t.files[n];this.database=t},set:function(n,r){if(!this.initializedPromise.isResolved){return}var i=this.file;i[n]=r;var s=JSON.stringify(this.database);if(t){localStorage.setItem("database",s)}},get:function(t,n){if(!this.initializedPromise.isResolved){return n}return this.file[t]||n}};return n}();var PDFFindBar={opened:false,bar:null,toggleButton:null,findField:null,highlightAll:null,caseSensitive:null,findMsg:null,findStatusIcon:null,findPreviousButton:null,findNextButton:null,initialize:function(e){if(typeof PDFFindController==="undefined"||PDFFindController===null){throw"PDFFindBar cannot be initialized "+"without a PDFFindController instance."}this.bar=e.bar;this.toggleButton=e.toggleButton;this.findField=e.findField;this.highlightAll=e.highlightAllCheckbox;this.caseSensitive=e.caseSensitiveCheckbox;this.findMsg=e.findMsg;this.findStatusIcon=e.findStatusIcon;this.findPreviousButton=e.findPreviousButton;this.findNextButton=e.findNextButton;var t=this;this.toggleButton.addEventListener("click",function(){t.toggle()});this.findField.addEventListener("input",function(){t.dispatchEvent("")});this.bar.addEventListener("keydown",function(e){switch(e.keyCode){case 13:if(e.target===t.findField){t.dispatchEvent("again",e.shiftKey)}break;case 27:t.close();break}});this.findPreviousButton.addEventListener("click",function(){t.dispatchEvent("again",true)});this.findNextButton.addEventListener("click",function(){t.dispatchEvent("again",false)});this.highlightAll.addEventListener("click",function(){t.dispatchEvent("highlightallchange")});this.caseSensitive.addEventListener("click",function(){t.dispatchEvent("casesensitivitychange")})},dispatchEvent:function(e,t){var n=document.createEvent("CustomEvent");n.initCustomEvent("find"+e,true,true,{query:this.findField.value,caseSensitive:this.caseSensitive.checked,highlightAll:this.highlightAll.checked,findPrevious:t});return window.dispatchEvent(n)},updateUIState:function(e,t){var n=false;var r="";var i="";switch(e){case FindStates.FIND_FOUND:break;case FindStates.FIND_PENDING:i="pending";break;case FindStates.FIND_NOTFOUND:r=mozL10n.get("find_not_found",null,"Phrase not found");n=true;break;case FindStates.FIND_WRAPPED:if(t){r=mozL10n.get("find_reached_top",null,"Reached top of document, continued from bottom")}else{r=mozL10n.get("find_reached_bottom",null,"Reached end of document, continued from top")}break}if(n){this.findField.classList.add("notFound")}else{this.findField.classList.remove("notFound")}this.findField.setAttribute("data-status",i);this.findMsg.textContent=r},open:function(){if(this.opened)return;this.opened=true;this.toggleButton.classList.add("toggled");this.bar.classList.remove("hidden");this.findField.select();this.findField.focus()},close:function(){if(!this.opened)return;this.opened=false;this.toggleButton.classList.remove("toggled");this.bar.classList.add("hidden");PDFFindController.active=false},toggle:function(){if(this.opened){this.close()}else{this.open()}}};var PDFFindController={startedTextExtraction:false,extractTextPromises:[],pendingFindMatches:{},active:false,pageContents:[],pageMatches:[],selected:{pageIdx:-1,matchIdx:-1},offset:{pageIdx:null,matchIdx:null},resumePageIdx:null,resumeCallback:null,state:null,dirtyMatch:false,findTimeout:null,pdfPageSource:null,integratedFind:false,firstPagePromise:new PDFJS.Promise,initialize:function(e){if(typeof PDFFindBar==="undefined"||PDFFindBar===null){throw"PDFFindController cannot be initialized "+"without a PDFFindController instance"}this.pdfPageSource=e.pdfPageSource;this.integratedFind=e.integratedFind;var t=["find","findagain","findhighlightallchange","findcasesensitivitychange"];this.handleEvent=this.handleEvent.bind(this);for(var n=0;n<t.length;n++){window.addEventListener(t[n],this.handleEvent)}},reset:function(){this.startedTextExtraction=false;this.extractTextPromises=[];this.active=false},calcFindMatch:function(e){var t=this.pageContents[e];var n=this.state.query;var r=this.state.caseSensitive;var i=n.length;if(i===0){return}if(!r){t=t.toLowerCase();n=n.toLowerCase()}var s=[];var o=-i;while(true){o=t.indexOf(n,o+i);if(o===-1){break}s.push(o)}this.pageMatches[e]=s;this.updatePage(e);if(this.resumePageIdx===e){var u=this.resumeCallback;this.resumePageIdx=null;this.resumeCallback=null;u()}},extractText:function(){function r(e){n.pdfPageSource.pages[e].getTextContent().then(function(i){var s=i.bidiTexts;var o="";for(var u=0;u<s.length;u++){o+=s[u].str}n.pageContents.push(o);n.extractTextPromises[e].resolve(e);if(e+1<n.pdfPageSource.pages.length)r(e+1)})}if(this.startedTextExtraction){return}this.startedTextExtraction=true;this.pageContents=[];for(var e=0,t=this.pdfPageSource.pdfDocument.numPages;e<t;e++){this.extractTextPromises.push(new PDFJS.Promise)}var n=this;r(0)},handleEvent:function(e){if(this.state===null||e.type!=="findagain"){this.dirtyMatch=true}this.state=e.detail;this.updateUIState(FindStates.FIND_PENDING);this.firstPagePromise.then(function(){this.extractText();clearTimeout(this.findTimeout);if(e.type==="find"){this.findTimeout=setTimeout(this.nextMatch.bind(this),250)}else{this.nextMatch()}}.bind(this))},updatePage:function(e){var t=this.pdfPageSource.pages[e];if(this.selected.pageIdx===e){t.scrollIntoView()}if(t.textLayer){t.textLayer.updateMatches()}},nextMatch:function(){var e=this.pdfPageSource.pages;var t=this.state.findPrevious;var n=this.pdfPageSource.pages.length;this.active=true;if(this.dirtyMatch){this.dirtyMatch=false;this.selected.pageIdx=this.selected.matchIdx=-1;this.offset.pageIdx=t?n-1:0;this.offset.matchIdx=null;this.hadMatch=false;this.resumeCallback=null;this.resumePageIdx=null;this.pageMatches=[];var r=this;for(var i=0;i<n;i++){this.updatePage(i);if(!(i in this.pendingFindMatches)){this.pendingFindMatches[i]=true;this.extractTextPromises[i].then(function(e){delete r.pendingFindMatches[e];r.calcFindMatch(e)})}}}if(this.state.query===""){this.updateUIState(FindStates.FIND_FOUND);return}if(this.resumeCallback){return}var s=this.offset;if(s.matchIdx!==null){var o=this.pageMatches[s.pageIdx].length;if(!t&&s.matchIdx+1<o||t&&s.matchIdx>0){this.hadMatch=true;s.matchIdx=t?s.matchIdx-1:s.matchIdx+1;this.updateMatch(true);return}this.advanceOffsetPage(t)}this.nextPageMatch()},nextPageMatch:function(){if(this.resumePageIdx!==null)console.error("There can only be one pending page.");var e=function(e){var t=this.offset;var n=e.length;var r=this.state.findPrevious;if(n){this.hadMatch=true;t.matchIdx=r?n-1:0;this.updateMatch(true)}else{this.advanceOffsetPage(r);if(t.wrapped){t.matchIdx=null;if(!this.hadMatch){this.updateMatch(false);return}}this.nextPageMatch()}}.bind(this);var t=this.offset.pageIdx;var n=this.pageMatches;if(!n[t]){this.resumeCallback=function(){e(n[t])};this.resumePageIdx=t;return}e(n[t])},advanceOffsetPage:function(e){var t=this.offset;var n=this.extractTextPromises.length;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1;t.matchIdx=null;if(t.pageIdx>=n||t.pageIdx<0){t.pageIdx=e?n-1:0;t.wrapped=true;return}},updateMatch:function(e){var t=FindStates.FIND_NOTFOUND;var n=this.offset.wrapped;this.offset.wrapped=false;if(e){var r=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx;this.selected.matchIdx=this.offset.matchIdx;t=n?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND;if(r!==-1&&r!==this.selected.pageIdx){this.updatePage(r)}}this.updateUIState(t,this.state.findPrevious);if(this.selected.pageIdx!==-1){this.updatePage(this.selected.pageIdx,true)}},updateUIState:function(e,t){if(this.integratedFind){FirefoxCom.request("updateFindControlState",{result:e,findPrevious:t});return}PDFFindBar.updateUIState(e,t)}};var PDFHistory={initialized:false,initialDestination:null,initialize:function(t){function i(){var e=r._getPreviousParams(null,true);if(e){var t=!r.current.dest&&r.current.hash!==r.previousHash;r._pushToHistory(e,false,t);r._updatePreviousBookmark()}window.removeEventListener("beforeunload",i,false)}if(PDFJS.disableHistory||PDFView.isViewerEmbedded){return}this.initialized=true;this.reInitialized=false;this.allowHashChange=true;this.historyUnlocked=true;this.previousHash=window.location.hash.substring(1);this.currentBookmark="";this.currentPage=0;this.updatePreviousBookmark=false;this.previousBookmark="";this.previousPage=0;this.nextHashParam="";this.fingerprint=t;this.currentUid=this.uid=0;this.current={};var n=window.history.state;if(this._isStateObjectDefined(n)){if(n.target.dest){this.initialDestination=n.target.dest}else{PDFView.initialBookmark=n.target.hash}this.currentUid=n.uid;this.uid=n.uid+1;this.current=n.target}else{if(n&&n.fingerprint&&this.fingerprint!==n.fingerprint){this.reInitialized=true}window.history.replaceState({fingerprint:this.fingerprint},"",document.URL)}var r=this;window.addEventListener("popstate",function(t){t.preventDefault();t.stopPropagation();if(!r.historyUnlocked){return}if(t.state){r._goTo(t.state)}else{r.previousHash=window.location.hash.substring(1);if(r.uid===0){var n=r.previousHash&&r.currentBookmark&&r.previousHash!==r.currentBookmark?{hash:r.currentBookmark,page:r.currentPage}:{page:1};r.historyUnlocked=false;r.allowHashChange=false;window.history.back();r._pushToHistory(n,false,true);window.history.forward();r.historyUnlocked=true}r._pushToHistory({hash:r.previousHash},false,true);r._updatePreviousBookmark()}},false);window.addEventListener("beforeunload",i,false);window.addEventListener("pageshow",function(t){window.addEventListener("beforeunload",i,false)},false)},_isStateObjectDefined:function(t){return t&&t.uid>=0&&t.fingerprint&&this.fingerprint===t.fingerprint&&t.target&&t.target.hash?true:false},get isHashChangeUnlocked(){if(!this.initialized){return true}var e=this.allowHashChange;this.allowHashChange=true;return e},_updatePreviousBookmark:function(){if(this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage){this.previousBookmark=this.currentBookmark;this.previousPage=this.currentPage;this.updatePreviousBookmark=false}},updateCurrentBookmark:function(t,n){if(this.initialized){this.currentBookmark=t.substring(1);this.currentPage=n|0;this._updatePreviousBookmark()}},updateNextHashParam:function(t){if(this.initialized){this.nextHashParam=t}},push:function(t,n){if(!(this.initialized&&this.historyUnlocked)){return}if(t.dest&&!t.hash){t.hash=this.current.hash&&this.current.dest&&this.current.dest===t.dest?this.current.hash:PDFView.getDestinationHash(t.dest).split("#")[1]}if(t.page){t.page|=0}if(n){var r=window.history.state.target;if(!r){this._pushToHistory(t,false);this.previousHash=window.location.hash.substring(1)}this.updatePreviousBookmark=this.nextHashParam?false:true;if(r){this._updatePreviousBookmark()}return}if(this.nextHashParam){if(this.nextHashParam===t.hash){this.nextHashParam=null;this.updatePreviousBookmark=true;return}else{this.nextHashParam=null}}if(t.hash){if(this.current.hash){if(this.current.hash!==t.hash){this._pushToHistory(t,true)}else{if(!this.current.page&&t.page){this._pushToHistory(t,false,true)}this.updatePreviousBookmark=true}}else{this._pushToHistory(t,true)}}else if(this.current.page&&t.page&&this.current.page!==t.page){this._pushToHistory(t,true)}},_getPreviousParams:function(t,n){if(!(this.currentBookmark&&this.currentPage)){return null}else if(this.updatePreviousBookmark){this.updatePreviousBookmark=false}if(this.uid>0&&!(this.previousBookmark&&this.previousPage)){return null}if(!this.current.dest&&!t||n){if(this.previousBookmark===this.currentBookmark){return null}}else if(this.current.page||t){if(this.previousPage===this.currentPage){return null}}else{return null}var r={hash:this.currentBookmark,page:this.currentPage};if(PresentationMode.active){r.hash=null}return r},_stateObj:function(t){return{fingerprint:this.fingerprint,uid:this.uid,target:t}},_pushToHistory:function(t,n,r){if(!this.initialized){return}if(!t.hash&&t.page){t.hash="page="+t.page}if(n&&!r){var i=this._getPreviousParams();if(i){var s=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(i,false,s)}}if(r||this.uid===0){window.history.replaceState(this._stateObj(t),"",document.URL)}else{window.history.pushState(this._stateObj(t),"",document.URL)}this.currentUid=this.uid++;this.current=t;this.updatePreviousBookmark=true},_goTo:function(t){if(!(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(t))){return}if(!this.reInitialized&&t.uid<this.currentUid){var n=this._getPreviousParams(true);if(n){this._pushToHistory(this.current,false);this._pushToHistory(n,false);this.currentUid=t.uid;window.history.back();return}}this.historyUnlocked=false;if(t.target.dest){PDFView.navigateTo(t.target.dest)}else{PDFView.setHash(t.target.hash)}this.currentUid=t.uid;if(t.uid>this.uid){this.uid=t.uid}this.current=t.target;this.updatePreviousBookmark=true;var r=window.location.hash.substring(1);if(this.previousHash!==r){this.allowHashChange=false}this.previousHash=r;this.historyUnlocked=true},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(t){if(this.initialized&&this.historyUnlocked){var n=window.history.state;if(t===-1&&n&&n.uid>0){window.history.back()}else if(t===1&&n&&n.uid<this.uid-1){window.history.forward()}}}};var SecondaryToolbar={opened:false,previousContainerHeight:null,newContainerHeight:null,initialize:function(t){this.toolbar=t.toolbar;this.toggleButton=t.toggleButton;this.buttonContainer=this.toolbar.firstElementChild;this.presentationMode=t.presentationMode;this.openFile=t.openFile;this.print=t.print;this.download=t.download;this.firstPage=t.firstPage;this.lastPage=t.lastPage;this.pageRotateCw=t.pageRotateCw;this.pageRotateCcw=t.pageRotateCcw;this.toggleButton.addEventListener("click",this.toggle.bind(this));this.presentationMode.addEventListener("click",this.presentationModeClick.bind(this));this.openFile.addEventListener("click",this.openFileClick.bind(this));this.print.addEventListener("click",this.printClick.bind(this));this.download.addEventListener("click",this.downloadClick.bind(this));this.firstPage.addEventListener("click",this.firstPageClick.bind(this));this.lastPage.addEventListener("click",this.lastPageClick.bind(this));this.pageRotateCw.addEventListener("click",this.pageRotateCwClick.bind(this));this.pageRotateCcw.addEventListener("click",this.pageRotateCcwClick.bind(this))},presentationModeClick:function(t){PresentationMode.request();this.close()},openFileClick:function(t){document.getElementById("fileInput").click();this.close(t.target)},printClick:function(t){window.print();this.close(t.target)},downloadClick:function(t){PDFView.download();this.close(t.target)},firstPageClick:function(t){PDFView.page=1},lastPageClick:function(t){PDFView.page=PDFView.pdfDocument.numPages},pageRotateCwClick:function(t){PDFView.rotatePages(90)},pageRotateCcwClick:function(t){PDFView.rotatePages(-90)},setMaxHeight:function(t){if(!t){return}this.newContainerHeight=t.clientHeight;if(this.previousContainerHeight===this.newContainerHeight){return}this.buttonContainer.setAttribute("style","max-height: "+(this.newContainerHeight-SCROLLBAR_PADDING)+"px;");this.previousContainerHeight=this.newContainerHeight},open:function(){if(this.opened){return}this.opened=true;this.toggleButton.classList.add("toggled");this.toolbar.classList.remove("hidden")},close:function(t){if(!this.opened){return}else if(t&&!this.toolbar.contains(t)){return}this.opened=false;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled")},toggle:function(){if(this.opened){this.close()}else{this.open()}},get isOpen(){return this.opened}};var PasswordPrompt={visible:false,updatePassword:null,reason:null,overlayContainer:null,passwordField:null,passwordText:null,passwordSubmit:null,passwordCancel:null,initialize:function(t){this.overlayContainer=t.overlayContainer;this.passwordField=t.passwordField;this.passwordText=t.passwordText;this.passwordSubmit=t.passwordSubmit;this.passwordCancel=t.passwordCancel;this.passwordSubmit.addEventListener("click",this.verifyPassword.bind(this));this.passwordCancel.addEventListener("click",this.hide.bind(this));this.passwordField.addEventListener("keydown",function(e){if(e.keyCode===13){this.verifyPassword()}}.bind(this));this.overlayContainer.addEventListener("keydown",function(e){if(e.keyCode===27){this.hide()}}.bind(this))},show:function(){if(this.visible){return}this.visible=true;this.overlayContainer.classList.remove("hidden");this.passwordField.focus();var t=mozL10n.get("password_label",null,"Enter the password to open this PDF file.");if(this.reason===PDFJS.PasswordResponses.INCORRECT_PASSWORD){t=mozL10n.get("password_invalid",null,"Invalid password. Please try again.")}this.passwordText.textContent=t},hide:function(){if(!this.visible){return}this.visible=false;this.passwordField.value="";this.overlayContainer.classList.add("hidden")},verifyPassword:function(){var t=this.passwordField.value;if(t&&t.length>0){this.hide();return this.updatePassword(t)}}};var DELAY_BEFORE_HIDING_CONTROLS=3e3;var SELECTOR="presentationControls";var PresentationMode={active:false,args:null,contextMenuOpen:false,initialize:function(t){this.container=t.container;this.secondaryToolbar=t.secondaryToolbar;this.firstPage=t.firstPage;this.lastPage=t.lastPage;this.pageRotateCw=t.pageRotateCw;this.pageRotateCcw=t.pageRotateCcw;this.firstPage.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.firstPageClick()}.bind(this));this.lastPage.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.lastPageClick()}.bind(this));this.pageRotateCw.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.pageRotateCwClick()}.bind(this));this.pageRotateCcw.addEventListener("click",function(){this.contextMenuOpen=false;this.secondaryToolbar.pageRotateCcwClick()}.bind(this))},get isFullscreen(){return document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement},request:function(){if(!PDFView.supportsFullscreen||this.isFullscreen){return false}if(this.container.requestFullscreen){this.container.requestFullscreen()}else if(this.container.mozRequestFullScreen){this.container.mozRequestFullScreen()}else if(this.container.webkitRequestFullScreen){this.container.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else if(this.container.msRequestFullscreen){this.container.msRequestFullscreen()}else{return false}this.args={page:PDFView.page,previousScale:PDFView.currentScaleValue};return true},enter:function(){this.active=true;PDFView.page=this.args.page;PDFView.parseScale("page-fit",true);window.addEventListener("mousemove",this.mouseMove,false);window.addEventListener("mousedown",this.mouseDown,false);window.addEventListener("contextmenu",this.contextMenu,false);this.showControls();this.contextMenuOpen=false;this.container.setAttribute("contextmenu","viewerContextMenu")},exit:function(){this.active=false;var t=PDFView.page;PDFView.parseScale(this.args.previousScale);PDFView.page=t;window.removeEventListener("mousemove",this.mouseMove,false);window.removeEventListener("mousedown",this.mouseDown,false);window.removeEventListener("contextmenu",this.contextMenu,false);this.hideControls();this.args=null;PDFView.clearMouseScrollState();this.container.removeAttribute("contextmenu");this.contextMenuOpen=false;scrollIntoView(document.getElementById("thumbnailContainer"+t))},showControls:function(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout)}else{this.container.classList.add(SELECTOR)}this.controlsTimeout=setTimeout(function(){this.container.classList.remove(SELECTOR);delete this.controlsTimeout}.bind(this),DELAY_BEFORE_HIDING_CONTROLS)},hideControls:function(){if(!this.controlsTimeout){return}this.container.classList.remove(SELECTOR);clearTimeout(this.controlsTimeout);delete this.controlsTimeout},mouseMove:function(t){PresentationMode.showControls()},mouseDown:function(t){var n=PresentationMode;if(n.contextMenuOpen){n.contextMenuOpen=false;t.preventDefault();return}if(t.button===0){var r=t.target.href&&t.target.classList.contains("internalLink");if(!r){t.preventDefault();PDFView.page+=t.shiftKey?-1:1}}},contextMenu:function(t){PresentationMode.contextMenuOpen=true}};(function(){function t(e){if(PresentationMode.isFullscreen){PresentationMode.enter()}else{PresentationMode.exit()}}window.addEventListener("fullscreenchange",t,false);window.addEventListener("mozfullscreenchange",t,false);window.addEventListener("webkitfullscreenchange",t,false);window.addEventListener("MSFullscreenChange",t,false)})();var PDFView={pages:[],thumbnails:[],currentScale:UNKNOWN_SCALE,currentScaleValue:null,initialBookmark:document.location.hash.substring(1),container:null,thumbnailContainer:null,initialized:false,fellback:false,pdfDocument:null,sidebarOpen:false,pageViewScroll:null,thumbnailViewScroll:null,pageRotation:0,mouseScrollTimeStamp:0,mouseScrollDelta:0,lastScroll:0,previousPageNumber:1,isViewerEmbedded:window.parent!==window,initialize:function(){var t=this;var n=this.container=document.getElementById("viewerContainer");this.pageViewScroll={};this.watchScroll(n,this.pageViewScroll,updateViewarea);var r=this.thumbnailContainer=document.getElementById("thumbnailView");this.thumbnailViewScroll={};this.watchScroll(r,this.thumbnailViewScroll,this.renderHighestPriority.bind(this));PDFFindBar.initialize({bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),highlightAllCheckbox:document.getElementById("findHighlightAll"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),findMsg:document.getElementById("findMsg"),findStatusIcon:document.getElementById("findStatusIcon"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")});PDFFindController.initialize({pdfPageSource:this,integratedFind:this.supportsIntegratedFind});SecondaryToolbar.initialize({toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),presentationMode:document.getElementById("secondaryPresentationMode"),openFile:document.getElementById("secondaryOpenFile"),print:document.getElementById("secondaryPrint"),download:document.getElementById("secondaryDownload"),firstPage:document.getElementById("firstPage"),lastPage:document.getElementById("lastPage"),pageRotateCw:document.getElementById("pageRotateCw"),pageRotateCcw:document.getElementById("pageRotateCcw")});PasswordPrompt.initialize({overlayContainer:document.getElementById("overlayContainer"),passwordField:document.getElementById("password"),passwordText:document.getElementById("passwordText"),passwordSubmit:document.getElementById("passwordSubmit"),passwordCancel:document.getElementById("passwordCancel")});PresentationMode.initialize({container:n,secondaryToolbar:SecondaryToolbar,firstPage:document.getElementById("contextFirstPage"),lastPage:document.getElementById("contextLastPage"),pageRotateCw:document.getElementById("contextPageRotateCw"),pageRotateCcw:document.getElementById("contextPageRotateCcw")});this.initialized=true;n.addEventListener("scroll",function(){t.lastScroll=Date.now()},false)},getPage:function(t){return this.pdfDocument.getPage(t)},watchScroll:function(t,n,r){n.down=true;n.lastY=t.scrollTop;t.addEventListener("scroll",function(i){var s=t.scrollTop;var o=n.lastY;if(s>o)n.down=true;else if(s<o)n.down=false;n.lastY=s;r()},true)},setScale:function(t,n,r){if(t==this.currentScale)return;var i=this.pages;for(var s=0;s<i.length;s++)i[s].update(t);if(!r&&this.currentScale!=t)this.pages[this.page-1].scrollIntoView();this.currentScale=t;var o=document.createEvent("UIEvents");o.initUIEvent("scalechange",false,false,window,0);o.scale=t;o.resetAutoSettings=n;window.dispatchEvent(o)},parseScale:function(t,n,r){if("custom"==t)return;var i=parseFloat(t);this.currentScaleValue=t;if(i){this.setScale(i,true,r);return}var s=this.container;var o=this.pages[this.page-1];if(!o){return}var u=(s.clientWidth-SCROLLBAR_PADDING)/o.width*o.scale;var a=(s.clientHeight-VERTICAL_PADDING)/o.height*o.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=u;break;case"page-height":i=a;break;case"page-fit":i=Math.min(u,a);break;case"auto":i=Math.min(1,u);break}this.setScale(i,n,r);selectScaleOption(t)},zoomIn:function(t){var n=this.currentScale;do{n=(n*DEFAULT_SCALE_DELTA).toFixed(2);n=Math.ceil(n*10)/10;n=Math.min(MAX_SCALE,n)}while(--t&&n<MAX_SCALE);this.parseScale(n,true)},zoomOut:function(t){var n=this.currentScale;do{n=(n/DEFAULT_SCALE_DELTA).toFixed(2);n=Math.floor(n*10)/10;n=Math.max(MIN_SCALE,n)}while(--t&&n>MIN_SCALE);this.parseScale(n,true)},set page(e){var t=this.pages;var n=document.getElementById("pageNumber");var r=document.createEvent("UIEvents");r.initUIEvent("pagechange",false,false,window,0);if(!(0<e&&e<=t.length)){this.previousPageNumber=e;r.pageNumber=this.page;window.dispatchEvent(r);return}t[e-1].updateStats();this.previousPageNumber=currentPageNumber;currentPageNumber=e;r.pageNumber=e;window.dispatchEvent(r);if(updateViewarea.inProgress)return;if(this.loading&&e==1)return;t[e-1].scrollIntoView()},get page(){return currentPageNumber},get supportsPrinting(){var e=document.createElement("canvas");var t="mozPrintCallback"in e;Object.defineProperty(this,"supportsPrinting",{value:t,enumerable:true,configurable:true,writable:false});return t},get supportsFullscreen(){var e=document.documentElement;var t=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen;if(document.fullscreenEnabled===false||document.mozFullScreenEnabled===false||document.webkitFullscreenEnabled===false||document.msFullscreenEnabled===false){t=false}else if(this.isViewerEmbedded){t=false}Object.defineProperty(this,"supportsFullscreen",{value:t,enumerable:true,configurable:true,writable:false});return t},get supportsIntegratedFind(){var e=false;Object.defineProperty(this,"supportsIntegratedFind",{value:e,enumerable:true,configurable:true,writable:false});return e},get supportsDocumentFonts(){var e=true;Object.defineProperty(this,"supportsDocumentFonts",{value:e,enumerable:true,configurable:true,writable:false});return e},get supportsDocumentColors(){var e=true;Object.defineProperty(this,"supportsDocumentColors",{value:e,enumerable:true,configurable:true,writable:false});return e},get loadingBar(){var e=new ProgressBar("#loadingBar",{});Object.defineProperty(this,"loadingBar",{value:e,enumerable:true,configurable:true,writable:false});return e},get isHorizontalScrollbarEnabled(){var e=document.getElementById("viewerContainer");return e.scrollWidth>e.clientWidth},initPassiveLoading:function(){var t={rangeListeners:[],progressListeners:[],addRangeListener:function(t){this.rangeListeners.push(t)},addProgressListener:function(t){this.progressListeners.push(t)},onDataRange:function(t,n){var r=this.rangeListeners;for(var i=0,s=r.length;i<s;++i){r[i](t,n)}},onDataProgress:function(t){var n=this.progressListeners;for(var r=0,i=n.length;r<i;++r){n[r](t)}},requestDataRange:function(t,n){FirefoxCom.request("requestDataRange",{begin:t,end:n})}};window.addEventListener("message",function(n){var r=n.data;if(typeof r!=="object"||!("pdfjsLoadAction"in r))return;switch(r.pdfjsLoadAction){case"supportsRangedLoading":PDFView.open(r.pdfUrl,0,undefined,t,{length:r.length});break;case"range":t.onDataRange(r.begin,r.chunk);break;case"rangeProgress":t.onDataProgress(r.loaded);break;case"progress":PDFView.progress(r.loaded/r.total);break;case"complete":if(!r.data){PDFView.error(mozL10n.get("loading_error",null,"An error occurred while loading the PDF."),n);break}PDFView.open(r.data,0);break}});FirefoxCom.requestSync("initPassiveLoading",null)},setTitleUsingUrl:function(t){this.url=t;try{this.setTitle(decodeURIComponent(getFileName(t))||t)}catch(n){this.setTitle(t)}},setTitle:function(t){document.title=t},open:function(t,n,r,i,s){function l(e){a.progress(e.loaded/e.total)}var o={password:r};if(typeof t==="string"){this.setTitleUsingUrl(t);o.url=t}else if(t&&"byteLength"in t){o.data=t}if(s){for(var u in s){o[u]=s[u]}}this.pdfDocument=null;var a=this;a.loading=true;var f=function(t,n){PasswordPrompt.updatePassword=t;PasswordPrompt.reason=n;PasswordPrompt.show()};PDFJS.getDocument(o,i,f,l).then(function(t){a.load(t,n);a.loading=false},function(t,n){var r=mozL10n.get("loading_error",null,"An error occurred while loading the PDF.");if(n&&n.name==="InvalidPDFException"){var r=mozL10n.get("invalid_file_error",null,"Invalid or corrupted PDF file.")}if(n&&n.name==="MissingPDFException"){var r=mozL10n.get("missing_file_error",null,"Missing PDF file.")}var i={message:t};a.error(r,i);a.loading=false})},download:function(){function t(){i.downloadUrl(n,r)}var n=this.url.split("#")[0];var r=getPDFFileNameFromURL(n);var i=new DownloadManager;i.onerror=function(e){PDFView.error("PDF failed to download.")};if(!this.pdfDocument){t();return}this.pdfDocument.getData().then(function(t){var s=PDFJS.createBlob(t,"application/pdf");i.download(s,n,r)},t).then(null,t)},fallback:function(){return},navigateTo:function(t){var n="";var r=this;var i=function(e){r.pendingRefStr=null;var s=e instanceof Object?r.pagesRefMap[e.num+" "+e.gen+" R"]:e+1;if(s){if(s>r.pages.length){s=r.pages.length}var o=r.pages[s-1];o.scrollIntoView(t);PDFHistory.push({dest:t,hash:n,page:s})}else{r.pendingRefStrLoaded=new PDFJS.Promise;r.pendingRefStr=e.num+" "+e.gen+" R";r.pendingRefStrLoaded.then(function(){i(e)})}};this.destinationsPromise.then(function(){if(typeof t==="string"){n=t;t=r.destinations[t]}if(!(t instanceof Array)){return}i(t[0])})},getDestinationHash:function(t){if(typeof t==="string")return PDFView.getAnchorUrl("#"+escape(t));if(t instanceof Array){var n=t[0];var r=n instanceof Object?this.pagesRefMap[n.num+" "+n.gen+" R"]:n+1;if(r){var i=PDFView.getAnchorUrl("#page="+r);var s=t[1];if(typeof s==="object"&&"name"in s&&s.name=="XYZ"){var o=t[4]||this.currentScaleValue;var u=parseFloat(o);if(u){o=u*100}i+="&zoom="+o;if(t[2]||t[3]){i+=","+(t[2]||0)+","+(t[3]||0)}}return i}}return""},getAnchorUrl:function(t){return t},error:function(t,n){var r=mozL10n.get("error_version_info",{version:PDFJS.version||"?",build:PDFJS.build||"?"},"PDF.js v{{version}} (build: {{build}})")+"\n";if(n){r+=mozL10n.get("error_message",{message:n.message},"Message: {{message}}");if(n.stack){r+="\n"+mozL10n.get("error_stack",{stack:n.stack},"Stack: {{stack}}")}else{if(n.filename){r+="\n"+mozL10n.get("error_file",{file:n.filename},"File: {{file}}")}if(n.lineNumber){r+="\n"+mozL10n.get("error_line",{line:n.lineNumber},"Line: {{line}}")}}}var i=document.getElementById("errorWrapper");i.removeAttribute("hidden");var s=document.getElementById("errorMessage");s.textContent=t;var o=document.getElementById("errorClose");o.onclick=function(){i.setAttribute("hidden","true")};var u=document.getElementById("errorMoreInfo");var a=document.getElementById("errorShowMore");var f=document.getElementById("errorShowLess");a.onclick=function(){u.removeAttribute("hidden");a.setAttribute("hidden","true");f.removeAttribute("hidden");u.style.height=u.scrollHeight+"px"};f.onclick=function(){u.setAttribute("hidden","true");a.removeAttribute("hidden");f.setAttribute("hidden","true")};a.oncontextmenu=noContextMenuHandler;f.oncontextmenu=noContextMenuHandler;o.oncontextmenu=noContextMenuHandler;a.removeAttribute("hidden");f.setAttribute("hidden","true");u.value=r},progress:function(t){var n=Math.round(t*100);if(n>PDFView.loadingBar.percent){PDFView.loadingBar.percent=n}},load:function(t,n){function r(e,t){e.onAfterDraw=function(){t.setImage(e.canvas)}}PDFFindController.reset();this.pdfDocument=t;var i=document.getElementById("errorWrapper");i.setAttribute("hidden","true");t.dataLoaded().then(function(){PDFView.loadingBar.hide();var e=document.getElementById("outerContainer");e.classList.remove("loadingInProgress")});var s=document.getElementById("thumbnailView");s.parentNode.scrollTop=0;while(s.hasChildNodes())s.removeChild(s.lastChild);if("_loadingInterval"in s)clearInterval(s._loadingInterval);var o=document.getElementById("viewer");while(o.hasChildNodes())o.removeChild(o.lastChild);var u=t.numPages;var a=t.fingerprint;document.getElementById("numPages").textContent=mozL10n.get("page_of",{pageCount:u},"of {{pageCount}}");document.getElementById("pageNumber").max=u;PDFView.documentFingerprint=a;var f=PDFView.store=new Settings(a);this.pageRotation=0;var l=this.pages=[];var c=this.pagesRefMap={};var h=this.thumbnails=[];var p=this.pagesPromise=new PDFJS.Promise;var d=this;var v=t.getPage(1);v.then(function(e){var i=e.getViewport((n||1)*CSS_UNITS);var a=[];for(var f=1;f<=u;++f){var v=i.clone();var m=new PageView(o,f,n,d.navigateTo.bind(d),v);var g=new ThumbnailView(s,f,v);r(m,g);l.push(m);h.push(g)}var y=document.createEvent("CustomEvent");y.initCustomEvent("documentload",true,true,{});window.dispatchEvent(y);PDFView.loadingBar.setWidth(o);for(var f=1;f<=u;++f){var b=t.getPage(f);b.then(function(e){var t=e.pageNumber;var n=l[t-1];if(!n.pdfPage){n.setPdfPage(e)}var r=h[t-1];if(!r.pdfPage){r.setPdfPage(e)}var i=e.ref;var s=i.num+" "+i.gen+" R";c[s]=e.pageNumber;if(d.pendingRefStr&&d.pendingRefStr===s){d.pendingRefStrLoaded.resolve()}});a.push(b)}PDFFindController.firstPagePromise.resolve();PDFJS.Promise.all(a).then(function(e){p.resolve(e)})});var m=f.initializedPromise;PDFJS.Promise.all([v,m]).then(function(){var e=null;if(f.get("exists",false)){var t=f.get("page","1");var r=f.get("zoom",PDFView.currentScale);var i=f.get("scrollLeft","0");var s=f.get("scrollTop","0");e="page="+t+"&zoom="+r+","+i+","+s}PDFHistory.initialize(d.documentFingerprint);d.setInitialView(e,n);if(!d.isViewerEmbedded){d.container.focus()}});p.then(function(){if(PDFView.supportsPrinting){t.getJavaScript().then(function(e){if(e.length){console.warn("Warning: JavaScript is not supported");PDFView.fallback()}var t=/\bprint\s*\(/g;for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i&&t.test(i)){setTimeout(function(){window.print()});return}}})}});var g=this.destinationsPromise=t.getDestinations();g.then(function(e){d.destinations=e});var y=[p,g,PDFView.animationStartedPromise];PDFJS.Promise.all(y).then(function(){t.getOutline().then(function(e){d.outline=new DocumentOutlineView(e);document.getElementById("viewOutline").disabled=!e})});t.getMetadata().then(function(e){var n=e.info,r=e.metadata;d.documentInfo=n;d.metadata=r;console.log("PDF "+t.fingerprint+" ["+n.PDFFormatVersion+" "+(n.Producer||"-")+" / "+(n.Creator||"-")+"]"+(PDFJS.version?" (PDF.js: "+PDFJS.version+")":""));var i;if(r){if(r.has("dc:title"))i=r.get("dc:title")}if(!i&&n&&n["Title"])i=n["Title"];if(i)d.setTitle(i+" - "+document.title);if(n.IsAcroFormPresent){console.warn("Warning: AcroForm/XFA is not supported");PDFView.fallback()}})},setInitialView:function(t,n){this.currentScale=0;this.currentScaleValue=null;document.getElementById("pageNumber").value=currentPageNumber=1;if(PDFHistory.initialDestination){this.navigateTo(PDFHistory.initialDestination);PDFHistory.initialDestination=null}else if(this.initialBookmark){this.setHash(this.initialBookmark);PDFHistory.push({hash:this.initialBookmark},!!this.initialBookmark);this.initialBookmark=null}else if(t){this.setHash(t)}else if(n){this.parseScale(n,true);this.page=1}if(PDFView.currentScale===UNKNOWN_SCALE){this.parseScale(DEFAULT_SCALE,true)}},renderHighestPriority:function(){var t=this.getVisiblePages();var n=this.getHighestPriority(t,this.pages,this.pageViewScroll.down);if(n){this.renderView(n,"page");return}if(this.sidebarOpen){var r=this.getVisibleThumbs();var i=this.getHighestPriority(r,this.thumbnails,this.thumbnailViewScroll.down);if(i)this.renderView(i,"thumbnail")}},getHighestPriority:function(t,n,r){var i=t.views;var s=i.length;if(s===0){return false}for(var o=0;o<s;++o){var u=i[o].view;if(!this.isViewFinished(u))return u}if(r){var a=t.last.id;if(n[a]&&!this.isViewFinished(n[a]))return n[a]}else{var f=t.first.id-2;if(n[f]&&!this.isViewFinished(n[f]))return n[f]}return false},isViewFinished:function(t){return t.renderingState===RenderingStates.FINISHED},renderView:function(t,n){var r=t.renderingState;switch(r){case RenderingStates.FINISHED:return false;case RenderingStates.PAUSED:PDFView.highestPriorityPage=n+t.id;t.resume();break;case RenderingStates.RUNNING:PDFView.highestPriorityPage=n+t.id;break;case RenderingStates.INITIAL:PDFView.highestPriorityPage=n+t.id;t.draw(this.renderHighestPriority.bind(this));break}return true},setHash:function(t){if(!t)return;if(t.indexOf("=")>=0){var n=PDFView.parseQueryString(t);if("nameddest"in n){PDFHistory.updateNextHashParam(n.nameddest);PDFView.navigateTo(n.nameddest);return}if("page"in n){var r=n.page|0||1;if("zoom"in n){var i=n.zoom.split(",");var s=i[0];var o=parseFloat(s);if(o)s=o/100;var u=[null,{name:"XYZ"},i.length>1?i[1]|0:null,i.length>2?i[2]|0:null,s];var a=this.pages[r-1];a.scrollIntoView(u)}else{this.page=r}}if("pagemode"in n){var f=document.getElementById("sidebarToggle");if(n.pagemode==="thumbs"||n.pagemode==="bookmarks"){if(!this.sidebarOpen){f.click()}this.switchSidebarView(n.pagemode==="thumbs"?"thumbs":"outline")}else if(n.pagemode==="none"&&this.sidebarOpen){f.click()}}}else if(/^\d+$/.test(t)){this.page=t}else{PDFHistory.updateNextHashParam(unescape(t));PDFView.navigateTo(unescape(t))}},switchSidebarView:function(t){var n=document.getElementById("thumbnailView");var r=document.getElementById("outlineView");var i=document.getElementById("viewThumbnail");var s=document.getElementById("viewOutline");switch(t){case"thumbs":var o=n.classList.contains("hidden");i.classList.add("toggled");s.classList.remove("toggled");n.classList.remove("hidden");r.classList.add("hidden");PDFView.renderHighestPriority();if(o){scrollIntoView(document.getElementById("thumbnailContainer"+this.page))}break;case"outline":i.classList.remove("toggled");s.classList.add("toggled");n.classList.add("hidden");r.classList.remove("hidden");if(s.getAttribute("disabled"))return;break}},getVisiblePages:function(){return this.getVisibleElements(this.container,this.pages,!PresentationMode.active)},getVisibleThumbs:function(){return this.getVisibleElements(this.thumbnailContainer,this.thumbnails)},getVisibleElements:function(t,n,r){var i=t.scrollTop,s=i+t.clientHeight;var o=t.scrollLeft,u=o+t.clientWidth;var a=[],f;var l,c,h,p;var d,v;for(var m=0,g=n.length;m<g;++m){f=n[m];l=f.el.offsetTop+f.el.clientTop;c=f.el.clientHeight;if(l+c<i){continue}if(l>s){break}d=f.el.offsetLeft+f.el.clientLeft;v=f.el.clientWidth;if(d+v<o||d>u){continue}h=Math.max(0,i-l)+Math.max(0,l+c-s);p=(c-h)*100/c|0;a.push({id:f.id,y:l,view:f,percent:p})}var y=a[0];var b=a[a.length-1];if(r){a.sort(function(e,t){var n=e.percent-t.percent;if(Math.abs(n)>.001){return-n}return e.id-t.id})}return{first:y,last:b,views:a}},parseQueryString:function(t){var n=t.split("&");var r={};for(var i=0,s=n.length;i<n.length;++i){var o=n[i].split("=");var u=o[0];var a=o.length>1?o[1]:null;r[decodeURIComponent(u)]=decodeURIComponent(a)}return r},beforePrint:function(){if(!this.supportsPrinting){var t=mozL10n.get("printing_not_supported",null,"Warning: Printing is not fully supported by this browser.");this.error(t);return}var n=false;if(!this.pages.length){n=true}else{for(var r=0,i=this.pages.length;r<i;++r){if(!this.pages[r].pdfPage){n=true;break}}}if(n){var s=mozL10n.get("printing_not_ready",null,"Warning: The PDF is not fully loaded for printing.");window.alert(s);return}var o=document.querySelector("body");o.setAttribute("data-mozPrintCallback",true);for(var r=0,i=this.pages.length;r<i;++r){this.pages[r].beforePrint()}},afterPrint:function(){var t=document.getElementById("printContainer");while(t.hasChildNodes())t.removeChild(t.lastChild)},rotatePages:function(t){this.pageRotation=(this.pageRotation+360+t)%360;for(var n=0,r=this.pages.length;n<r;n++){var i=this.pages[n];i.update(i.scale,this.pageRotation)}for(var n=0,r=this.thumbnails.length;n<r;n++){var s=this.thumbnails[n];s.update(this.pageRotation)}this.parseScale(this.currentScaleValue,true);this.renderHighestPriority();var o=this.pages[this.page-1];if(!o){return}setTimeout(function(){o.scrollIntoView()},0)},mouseScroll:function(t){var n=50;var r=(new Date).getTime();var i=this.mouseScrollTimeStamp;if(r>i&&r-i<n)return;if(this.mouseScrollDelta>0&&t<0||this.mouseScrollDelta<0&&t>0)this.clearMouseScrollState();this.mouseScrollDelta+=t;var s=120;if(Math.abs(this.mouseScrollDelta)>=s){var o={UP:-1,DOWN:1};var u=this.mouseScrollDelta>0?o.UP:o.DOWN;this.clearMouseScrollState();var a=this.page;if(a==1&&u==o.UP||a==this.pages.length&&u==o.DOWN)return;this.page+=u;this.mouseScrollTimeStamp=r}},clearMouseScrollState:function(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}};var PageView=function(t,n,r,i,s){function f(e,t,n){function r(e,t){e.href=PDFView.getDestinationHash(t);e.onclick=function(){if(t){PDFView.navigateTo(t)}return false};if(t){e.className="internalLink"}}function i(e,t){e.href=PDFView.getAnchorUrl("");e.onclick=function(){switch(t){case"GoToPage":document.getElementById("pageNumber").focus();break;case"GoBack":PDFHistory.back();break;case"GoForward":PDFHistory.forward();break;case"Find":if(!PDFView.supportsIntegratedFind){PDFFindBar.toggle()}break;case"NextPage":PDFView.page++;break;case"PrevPage":PDFView.page--;break;case"LastPage":PDFView.page=PDFView.pages.length;break;case"FirstPage":PDFView.page=1;break;default:break}return false};e.className="internalLink"}t.getAnnotations().then(function(s){if(a.annotationLayer){e.removeChild(a.annotationLayer);a.annotationLayer=null}n=n.clone({dontFlip:true});for(var o=0;o<s.length;o++){var u=s[o];var f=PDFJS.Annotation.fromData(u);if(!f||!f.hasHtml()){continue}var l=f.getHtmlElement(t.commonObjs);mozL10n.translate(l);u=f.getData();var c=u.rect;var h=t.view;c=PDFJS.Util.normalizeRect([c[0],h[3]-c[1]+h[1],c[2],h[3]-c[3]+h[1]]);l.style.left=c[0]+"px";l.style.top=c[1]+"px";l.style.position="absolute";var p=n.transform;var d="matrix("+p.join(",")+")";CustomStyle.setProp("transform",l,d);var v=-c[0]+"px "+ -c[1]+"px";CustomStyle.setProp("transformOrigin",l,v);if(u.subtype==="Link"&&!u.url){if(u.action){i(l,u.action)}else{r(l,"dest"in u?u.dest:null)}}if(!a.annotationLayer){var m=document.createElement("div");m.className="annotationLayer";e.appendChild(m);a.annotationLayer=m}a.annotationLayer.appendChild(l)}})}this.id=n;this.rotation=0;this.scale=r||1;this.viewport=s;this.pdfPageRotate=s.rotate;this.renderingState=RenderingStates.INITIAL;this.resume=null;this.textContent=null;this.textLayer=null;this.zoomLayer=null;this.annotationLayer=null;var o=document.createElement("a");o.name=""+this.id;var u=this.el=document.createElement("div");u.id="pageContainer"+this.id;u.className="page";u.style.width=Math.floor(this.viewport.width)+"px";u.style.height=Math.floor(this.viewport.height)+"px";t.appendChild(o);t.appendChild(u);this.setPdfPage=function(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;this.viewport=t.getViewport(this.scale*CSS_UNITS);this.stats=t.stats;this.reset()};this.destroy=function(){this.zoomLayer=null;this.reset();if(this.pdfPage){this.pdfPage.destroy()}};this.reset=function(){if(this.renderTask){this.renderTask.cancel()}this.resume=null;this.renderingState=RenderingStates.INITIAL;u.style.width=Math.floor(this.viewport.width)+"px";u.style.height=Math.floor(this.viewport.height)+"px";var t=u.childNodes;for(var n=u.childNodes.length-1;n>=0;n--){var r=t[n];if(this.zoomLayer&&this.zoomLayer===r){continue}u.removeChild(r)}u.removeAttribute("data-loaded");this.annotationLayer=null;delete this.canvas;this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon";u.appendChild(this.loadingIconDiv)};this.update=function(t,n){this.scale=t||this.scale;if(typeof n!=="undefined"){this.rotation=n}var r=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*CSS_UNITS,rotation:r});if(USE_ONLY_CSS_ZOOM&&this.canvas){this.cssZoom(this.canvas);return}else if(this.canvas&&!this.zoomLayer){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}if(this.zoomLayer){this.cssZoom(this.zoomLayer.firstChild)}this.reset()};this.cssZoom=function(t){t.style.width=t.parentNode.style.width=u.style.width=Math.floor(this.viewport.width)+"px";t.style.height=t.parentNode.style.height=u.style.height=Math.floor(this.viewport.height)+"px";if(this.textLayer){var n=this.viewport.width/t.width;var r="scale("+n+", "+n+")";var i=this.textLayer.textLayerDiv;CustomStyle.setProp("transform",i,r);CustomStyle.setProp("transformOrigin",i,"0% 0%")}};Object.defineProperty(this,"width",{get:function(){return this.viewport.width},enumerable:true});Object.defineProperty(this,"height",{get:function(){return this.viewport.height},enumerable:true});var a=this;this.getPagePoint=function(t,n){return this.viewport.convertToPdfPoint(t,n)};this.scrollIntoView=function(t){if(PresentationMode.active){t=null}if(!t){scrollIntoView(u);return}var n=0,r=0;var i=0,s=0,o,a;var f=0;switch(t[1].name){case"XYZ":n=t[2];r=t[3];f=t[4];n=n!==null?n:0;r=r!==null?r:this.height/this.scale;break;case"Fit":case"FitB":f="page-fit";break;case"FitH":case"FitBH":r=t[2];f="page-width";break;case"FitV":case"FitBV":n=t[2];f="page-height";break;case"FitR":n=t[2];r=t[3];i=t[4]-n;s=t[5]-r;o=(PDFView.container.clientWidth-SCROLLBAR_PADDING)/i/CSS_UNITS;a=(PDFView.container.clientHeight-SCROLLBAR_PADDING)/s/CSS_UNITS;f=Math.min(o,a);break;default:return}if(f&&f!==PDFView.currentScale){PDFView.parseScale(f,true,true)}else if(PDFView.currentScale===UNKNOWN_SCALE){PDFView.parseScale(DEFAULT_SCALE,true,true)}if(f==="page-fit"&&!t[4]){scrollIntoView(u);return}var l=[this.viewport.convertToViewportPoint(n,r),this.viewport.convertToViewportPoint(n+i,r+s)];setTimeout(function(){var t=PDFView.currentScale;var n=Math.min(l[0][0],l[1][0]);var r=Math.min(l[0][1],l[1][1]);var i=Math.abs(l[0][0]-l[1][0]);var s=Math.abs(l[0][1]-l[1][1]);scrollIntoView(u,{left:n,top:r,width:i,height:s})},0)};this.getTextContent=function(){if(!this.textContent){this.textContent=this.pdfPage.getTextContent()}return this.textContent};this.draw=function(t){function g(e){if(b===m.renderTask){m.renderTask=null}if(e==="cancelled"){return}m.renderingState=RenderingStates.FINISHED;if(m.loadingIconDiv){u.removeChild(m.loadingIconDiv);delete m.loadingIconDiv}if(m.zoomLayer){u.removeChild(m.zoomLayer);m.zoomLayer=null}if(e){PDFView.error(mozL10n.get("rendering_error",null,"An error occurred while rendering the page."),e)}m.stats=n.stats;m.updateStats();if(m.onAfterDraw){m.onAfterDraw()}cache.push(m);var r=document.createEvent("CustomEvent");r.initCustomEvent("pagerender",true,true,{pageNumber:n.pageNumber});u.dispatchEvent(r);t()}var n=this.pdfPage;if(!n){var r=PDFView.getPage(this.id);r.then(function(e){this.setPdfPage(e);this.draw(t)}.bind(this));return}if(this.renderingState!==RenderingStates.INITIAL){console.error("Must be in new state before drawing")}this.renderingState=RenderingStates.RUNNING;var i=this.viewport;var s=document.createElement("div");s.style.width=u.style.width;s.style.height=u.style.height;s.classList.add("canvasWrapper");var o=document.createElement("canvas");o.id="page"+this.id;s.appendChild(o);u.appendChild(s);this.canvas=o;var a=this.scale;var l=o.getContext("2d");var c=getOutputScale(l);if(USE_ONLY_CSS_ZOOM){var h=i.clone({scale:CSS_UNITS});c.sx*=h.width/i.width;c.sy*=h.height/i.height;c.scaled=true}o.width=Math.floor(i.width*c.sx);o.height=Math.floor(i.height*c.sy);o.style.width=Math.floor(i.width)+"px";o.style.height=Math.floor(i.height)+"px";var p=null;if(!PDFJS.disableTextLayer){p=document.createElement("div");p.className="textLayer";p.style.width=o.width+"px";p.style.height=o.height+"px";u.appendChild(p)}var d=this.textLayer=p?new TextLayerBuilder({textLayerDiv:p,pageIndex:this.id-1,lastScrollSource:PDFView,viewport:this.viewport,isViewerInPresentationMode:PresentationMode.active}):null;l._scaleX=c.sx;l._scaleY=c.sy;if(c.scaled){l.scale(c.sx,c.sy)}if(c.scaled&&p){var v="scale("+1/c.sx+", "+1/c.sy+")";CustomStyle.setProp("transform",p,v);CustomStyle.setProp("transformOrigin",p,"0% 0%")}var m=this;var y={canvasContext:l,viewport:this.viewport,textLayer:d,continueCallback:function(t){if(PDFView.highestPriorityPage!=="page"+m.id){m.renderingState=RenderingStates.PAUSED;m.resume=function(){m.renderingState=RenderingStates.RUNNING;t()};return}t()}};var b=this.renderTask=this.pdfPage.render(y);this.renderTask.then(function(){g(null)},function(t){g(t)});if(d){this.getTextContent().then(function(t){d.setTextContent(t)})}f(u,n,this.viewport);u.setAttribute("data-loaded",true)};this.beforePrint=function(){var t=this.pdfPage;var n=t.getViewport(1);var r=2;var i=document.createElement("canvas");i.width=Math.floor(n.width)*r;i.height=Math.floor(n.height)*r;i.style.width=r*n.width+"pt";i.style.height=r*n.height+"pt";var s="scale("+1/r+", "+1/r+")";CustomStyle.setProp("transform",i,s);CustomStyle.setProp("transformOrigin",i,"0% 0%");var o=document.getElementById("printContainer");var u=document.createElement("div");u.style.width=n.width+"pt";u.style.height=n.height+"pt";u.appendChild(i);o.appendChild(u);var a=this;i.mozPrintCallback=function(e){var s=e.context;s.save();s.fillStyle="rgb(255, 255, 255)";s.fillRect(0,0,i.width,i.height);s.restore();s.scale(r,r);var o={canvasContext:s,viewport:n};t.render(o).then(function(){e.done();a.pdfPage.destroy()},function(t){console.error(t);if("abort"in e){e.abort()}else{e.done()}a.pdfPage.destroy()})}};this.updateStats=function(){if(!this.stats){return}if(PDFJS.pdfBug&&Stats.enabled){var t=this.stats;Stats.add(this.id,t)}}};var ThumbnailView=function(t,n,r){var i=document.createElement("a");i.href=PDFView.getAnchorUrl("#page="+n);i.title=mozL10n.get("thumb_page_title",{page:n},"Page {{page}}");i.onclick=function(){PDFView.page=n;return false};this.pdfPage=undefined;this.viewport=r;this.pdfPageRotate=r.rotate;this.rotation=0;this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.id=n;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight;this.scale=this.canvasWidth/this.pageWidth;var s=this.el=document.createElement("div");s.id="thumbnailContainer"+n;s.className="thumbnail";if(n===1){s.classList.add("selected")}var o=document.createElement("div");o.className="thumbnailSelectionRing";o.style.width=this.canvasWidth+"px";o.style.height=this.canvasHeight+"px";s.appendChild(o);i.appendChild(s);t.appendChild(i);this.hasImage=false;this.renderingState=RenderingStates.INITIAL;this.setPdfPage=function(t){this.pdfPage=t;this.pdfPageRotate=t.rotate;this.viewport=t.getViewport(1);this.update()};this.update=function(t){if(!this.pdfPage){return}if(t!==undefined){this.rotation=t}var n=(this.rotation+this.pdfPage.rotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:n});this.pageWidth=this.viewport.width;this.pageHeight=this.viewport.height;this.pageRatio=this.pageWidth/this.pageHeight;this.canvasHeight=this.canvasWidth/this.pageWidth*this.pageHeight;this.scale=this.canvasWidth/this.pageWidth;s.removeAttribute("data-loaded");o.textContent="";o.style.width=this.canvasWidth+"px";o.style.height=this.canvasHeight+"px";this.hasImage=false;this.renderingState=RenderingStates.INITIAL;this.resume=null};this.getPageDrawContext=function(){var t=document.createElement("canvas");t.id="thumbnail"+n;t.width=this.canvasWidth;t.height=this.canvasHeight;t.className="thumbnailImage";t.setAttribute("aria-label",mozL10n.get("thumb_page_canvas",{page:n},"Thumbnail of Page {{page}}"));s.setAttribute("data-loaded",true);o.appendChild(t);var r=t.getContext("2d");r.save();r.fillStyle="rgb(255, 255, 255)";r.fillRect(0,0,this.canvasWidth,this.canvasHeight);r.restore();return r};this.drawingRequired=function(){return!this.hasImage};this.draw=function(t){if(!this.pdfPage){var n=PDFView.getPage(this.id);n.then(function(e){this.setPdfPage(e);this.draw(t)}.bind(this));return}if(this.renderingState!==RenderingStates.INITIAL){console.error("Must be in new state before drawing")}this.renderingState=RenderingStates.RUNNING;if(this.hasImage){t();return}var r=this;var i=this.getPageDrawContext();var s=this.viewport.clone({scale:this.scale});var o={canvasContext:i,viewport:s,continueCallback:function(e){if(PDFView.highestPriorityPage!=="thumbnail"+r.id){r.renderingState=RenderingStates.PAUSED;r.resume=function(){r.renderingState=RenderingStates.RUNNING;e()};return}e()}};this.pdfPage.render(o).then(function(){r.renderingState=RenderingStates.FINISHED;t()},function(n){r.renderingState=RenderingStates.FINISHED;t()});this.hasImage=true};this.setImage=function(t){if(this.hasImage||!t)return;this.renderingState=RenderingStates.FINISHED;var n=this.getPageDrawContext();n.drawImage(t,0,0,t.width,t.height,0,0,n.canvas.width,n.canvas.height);this.hasImage=true}};var TextLayerBuilder=function(t){var n=document.createDocumentFragment();this.textLayerDiv=t.textLayerDiv;this.layoutDone=false;this.divContentDone=false;this.pageIdx=t.pageIndex;this.matches=[];this.lastScrollSource=t.lastScrollSource;this.viewport=t.viewport;this.isViewerInPresentationMode=t.isViewerInPresentationMode;if(typeof PDFFindController==="undefined"){window.PDFFindController=null}if(typeof this.lastScrollSource==="undefined"){this.lastScrollSource=null}this.beginLayout=function(){this.textDivs=[];this.renderingDone=false};this.endLayout=function(){this.layoutDone=true;this.insertDivContent()};this.renderLayer=function(){var t=this;var r=this.textDivs;var i=this.textContent.bidiTexts;var s=this.textLayerDiv;var o=document.createElement("canvas");var u=o.getContext("2d");var a=1e5;if(r.length>a)return;for(var f=0,l=r.length;f<l;f++){var c=r[f];if("isWhitespace"in c.dataset){continue}n.appendChild(c);u.font=c.style.fontSize+" "+c.style.fontFamily;var h=u.measureText(c.textContent).width;if(h>0){var p=c.dataset.canvasWidth/h;var d=c.dataset.angle;var v="scale("+p+", 1)";v="rotate("+d+"deg) "+v;CustomStyle.setProp("transform",c,v);CustomStyle.setProp("transformOrigin",c,"0% 0%");s.appendChild(c)}}this.renderingDone=true;this.updateMatches();s.appendChild(n)};this.setupRenderLayoutTimer=function(){var t=200;var n=this;var r=this.lastScrollSource===null?0:this.lastScrollSource.lastScroll;if(Date.now()-r>t){this.renderLayer()}else{if(this.renderTimer)clearTimeout(this.renderTimer);this.renderTimer=setTimeout(function(){n.setupRenderLayoutTimer()},t)}};this.appendText=function(t){var n=document.createElement("div");var r=t.fontSize*Math.abs(t.vScale);n.dataset.canvasWidth=t.canvasWidth*Math.abs(t.hScale);n.dataset.fontName=t.fontName;n.dataset.angle=t.angle*(180/Math.PI);n.style.fontSize=r+"px";n.style.fontFamily=t.fontFamily;n.style.left=t.x+r*Math.sin(t.angle)+"px";n.style.top=t.y-r*Math.cos(t.angle)+"px";this.textDivs.push(n)};this.insertDivContent=function(){if(!this.layoutDone||this.divContentDone||!this.textContent)return;this.divContentDone=true;var t=this.textDivs;var n=this.textContent.bidiTexts;for(var r=0;r<n.length;r++){var i=n[r];var s=t[r];if(!/\S/.test(i.str)){s.dataset.isWhitespace=true;continue}s.textContent=i.str;s.dir=i.dir}this.setupRenderLayoutTimer()};this.setTextContent=function(t){this.textContent=t;this.insertDivContent()};this.convertMatches=function(t){var n=0;var r=0;var i=this.textContent.bidiTexts;var s=i.length-1;var o=PDFFindController===null?0:PDFFindController.state.query.length;var u=-1;var a;var f=[];for(var l=0;l<t.length;l++){var c=t[l];while(n!==s&&c>=r+i[n].str.length){r+=i[n].str.length;n++}if(n==i.length){console.error("Could not find matching mapping")}var h={begin:{divIdx:n,offset:c-r}};c+=o;while(n!==s&&c>r+i[n].str.length){r+=i[n].str.length;n++}h.end={divIdx:n,offset:c-r};f.push(h)}return f};this.renderMatches=function(t){function f(e,t){var i=e.divIdx;var u=r[i];u.textContent="";var a=n[i].str.substring(0,e.offset);var f=document.createTextNode(a);if(t){var l=s&&i===o;var c=document.createElement("span");c.className=t+(l?" selected":"");c.appendChild(f);u.appendChild(c);return}u.appendChild(f)}function l(e,t,i){var s=e.divIdx;var o=r[s];var u=n[s].str.substring(e.offset,t.offset);var a=document.createTextNode(u);if(i){var f=document.createElement("span");f.className=i;f.appendChild(a);o.appendChild(f);return}o.appendChild(a)}function c(e,t){r[e].className=t}if(t.length===0){return}var n=this.textContent.bidiTexts;var r=this.textDivs;var i=null;var s=PDFFindController===null?false:this.pageIdx===PDFFindController.selected.pageIdx;var o=PDFFindController===null?-1:PDFFindController.selected.matchIdx;var u=PDFFindController===null?false:PDFFindController.state.highlightAll;var a={divIdx:-1,offset:undefined};var h=o,p=h+1,d;if(u){h=0;p=t.length}else if(!s){return}for(d=h;d<p;d++){var v=t[d];var m=v.begin;var g=v.end;var y=s&&d===o;var b=y?" selected":"";if(y&&!this.isViewerInPresentationMode){scrollIntoView(r[m.divIdx],{top:-50})}if(!i||m.divIdx!==i.divIdx){if(i!==null){l(i,a)}f(m)}else{l(i,m)}if(m.divIdx===g.divIdx){l(m,g,"highlight"+b)}else{l(m,a,"highlight begin"+b);for(var w=m.divIdx+1;w<g.divIdx;w++){c(w,"highlight middle"+b)}f(g,"highlight end"+b)}i=g}if(i){l(i,a)}};this.updateMatches=function(){if(!this.renderingDone)return;var t=this.matches;var n=this.textDivs;var r=this.textContent.bidiTexts;var i=-1;for(var s=0;s<t.length;s++){var o=t[s];var u=Math.max(i,o.begin.divIdx);for(var a=u;a<=o.end.divIdx;a++){var f=n[a];f.textContent=r[a].str;f.className=""}i=o.end.divIdx+1}if(PDFFindController===null||!PDFFindController.active)return;this.matches=t=this.convertMatches(PDFFindController===null?[]:PDFFindController.pageMatches[this.pageIdx]||[]);this.renderMatches(this.matches)}};var DocumentOutlineView=function(t){function i(e,t){e.href=PDFView.getDestinationHash(t.dest);e.onclick=function(n){PDFView.navigateTo(t.dest);return false}}var n=document.getElementById("outlineView");var r=document.getElementById("viewOutline");while(n.firstChild)n.removeChild(n.firstChild);if(!t){if(!n.classList.contains("hidden"))PDFView.switchSidebarView("thumbs");return}var s=[{parent:n,items:t}];while(s.length>0){var o=s.shift();var u,a=o.items.length;for(u=0;u<a;u++){var f=o.items[u];var l=document.createElement("div");l.className="outlineItem";var c=document.createElement("a");i(c,f);c.textContent=f.title;l.appendChild(c);if(f.items.length>0){var h=document.createElement("div");h.className="outlineItems";l.appendChild(h);s.push({parent:h,items:f.items})}o.parent.appendChild(l)}}};document.addEventListener("DOMContentLoaded",function(t){PDFView.initialize();var n=PDFView.parseQueryString(document.location.search.substring(1));var r=n.file||DEFAULT_URL;var i=document.createElement("input");i.id="fileInput";i.className="fileInput";i.setAttribute("type","file");i.setAttribute("style","visibility: hidden; position: fixed; right: 0; top: 0");i.oncontextmenu=noContextMenuHandler;document.body.appendChild(i);if(!window.File||!window.FileReader||!window.FileList||!window.Blob){document.getElementById("openFile").setAttribute("hidden","true");document.getElementById("secondaryOpenFile").setAttribute("hidden","true")}else{document.getElementById("fileInput").value=null}var s=document.location.hash.substring(1);var o=PDFView.parseQueryString(s);if("disableWorker"in o){PDFJS.disableWorker=o["disableWorker"]==="true"}if("disableRange"in o){PDFJS.disableRange=o["disableRange"]==="true"}if("disableAutoFetch"in o){PDFJS.disableAutoFetch=o["disableAutoFetch"]==="true"}if("disableFontFace"in o){PDFJS.disableFontFace=o["disableFontFace"]==="true"}if("disableHistory"in o){PDFJS.disableHistory=o["disableHistory"]==="true"}if("useOnlyCssZoom"in o){USE_ONLY_CSS_ZOOM=o["useOnlyCssZoom"]==="true"}var u=navigator.language;if("locale"in o)u=o["locale"];mozL10n.setLanguage(u);if("textLayer"in o){switch(o["textLayer"]){case"off":PDFJS.disableTextLayer=true;break;case"visible":case"shadow":case"hover":var a=document.getElementById("viewer");a.classList.add("textLayer-"+o["textLayer"]);break}}if("pdfBug"in o){PDFJS.pdfBug=true;var f=o["pdfBug"];var l=f.split(",");PDFBug.enable(l);PDFBug.init()}if(!PDFView.supportsPrinting){document.getElementById("print").classList.add("hidden");document.getElementById("secondaryPrint").classList.add("hidden")}if(!PDFView.supportsFullscreen){document.getElementById("presentationMode").classList.add("hidden");document.getElementById("secondaryPresentationMode").classList.add("hidden")}if(PDFView.supportsIntegratedFind){document.getElementById("viewFind").classList.add("hidden")}PDFJS.LogManager.addLogger({warn:function(){PDFView.fallback()}});document.getElementById("scaleSelect").oncontextmenu=noContextMenuHandler;var c=document.getElementById("mainContainer");var h=document.getElementById("outerContainer");c.addEventListener("transitionend",function(e){if(e.target==c){var t=document.createEvent("UIEvents");t.initUIEvent("resize",false,false,window,0);window.dispatchEvent(t);h.classList.remove("sidebarMoving")}},true);document.getElementById("sidebarToggle").addEventListener("click",function(){this.classList.toggle("toggled");h.classList.add("sidebarMoving");h.classList.toggle("sidebarOpen");PDFView.sidebarOpen=h.classList.contains("sidebarOpen");PDFView.renderHighestPriority()});document.getElementById("viewThumbnail").addEventListener("click",function(){PDFView.switchSidebarView("thumbs")});document.getElementById("viewOutline").addEventListener("click",function(){PDFView.switchSidebarView("outline")});document.getElementById("previous").addEventListener("click",function(){PDFView.page--});document.getElementById("next").addEventListener("click",function(){PDFView.page++});document.getElementById("zoomIn").addEventListener("click",function(){PDFView.zoomIn()});document.getElementById("zoomOut").addEventListener("click",function(){PDFView.zoomOut()});document.getElementById("pageNumber").addEventListener("click",function(){this.select()});document.getElementById("pageNumber").addEventListener("change",function(){PDFView.page=this.value|0;if(this.value!==(this.value|0).toString()){this.value=PDFView.page}});document.getElementById("scaleSelect").addEventListener("change",function(){PDFView.parseScale(this.value)});document.getElementById("presentationMode").addEventListener("click",SecondaryToolbar.presentationModeClick.bind(SecondaryToolbar));document.getElementById("openFile").addEventListener("click",SecondaryToolbar.openFileClick.bind(SecondaryToolbar));document.getElementById("print").addEventListener("click",SecondaryToolbar.printClick.bind(SecondaryToolbar));document.getElementById("download").addEventListener("click",SecondaryToolbar.downloadClick.bind(SecondaryToolbar));PDFView.open(r,0)},true);window.addEventListener("resize",function(t){if(PDFView.initialized&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)){PDFView.parseScale(document.getElementById("scaleSelect").value)}updateViewarea();SecondaryToolbar.setMaxHeight(PDFView.container)});window.addEventListener("hashchange",function(t){if(PDFHistory.isHashChangeUnlocked){PDFView.setHash(document.location.hash.substring(1))}});window.addEventListener("change",function(t){var n=t.target.files;if(!n||n.length===0)return;var r=new FileReader;r.onload=function(t){var n=t.target.result;var r=new Uint8Array(n);PDFView.open(r,0)};var i=n[0];r.readAsArrayBuffer(i);PDFView.setTitleUsingUrl(i.name);document.getElementById("viewBookmark").setAttribute("hidden","true");document.getElementById("secondaryViewBookmark").setAttribute("hidden","true");document.getElementById("download").setAttribute("hidden","true");document.getElementById("secondaryDownload").setAttribute("hidden","true")},true);window.addEventListener("localized",function(t){document.getElementsByTagName("html")[0].dir=mozL10n.getDirection();PDFView.animationStartedPromise.then(function(){var e=document.getElementById("scaleSelectContainer");if(e.clientWidth>0){var t=document.getElementById("scaleSelect");t.setAttribute("style","min-width: inherit;");var n=t.clientWidth+SCALE_SELECT_CONTAINER_PADDING;t.setAttribute("style","min-width: "+(n+SCALE_SELECT_PADDING)+"px;");e.setAttribute("style","min-width: "+n+"px; "+"max-width: "+n+"px;")}SecondaryToolbar.setMaxHeight(PDFView.container)})},true);window.addEventListener("scalechange",function(t){document.getElementById("zoomOut").disabled=t.scale===MIN_SCALE;document.getElementById("zoomIn").disabled=t.scale===MAX_SCALE;var n=document.getElementById("customScaleOption");n.selected=false;if(!t.resetAutoSettings&&(document.getElementById("pageWidthOption").selected||document.getElementById("pageFitOption").selected||document.getElementById("pageAutoOption").selected)){updateViewarea();return}var r=selectScaleOption(""+t.scale);if(!r){n.textContent=Math.round(t.scale*1e4)/100+"%";n.selected=true}updateViewarea()},true);window.addEventListener("pagechange",function(t){var n=t.pageNumber;if(PDFView.previousPageNumber!==n){document.getElementById("pageNumber").value=n;var r=document.querySelector(".thumbnail.selected");if(r){r.classList.remove("selected")}var i=document.getElementById("thumbnailContainer"+n);i.classList.add("selected");var s=PDFView.getVisibleThumbs();var o=s.views.length;if(o>0){var u=s.first.id;var a=o>1?s.last.id:u;if(n<=u||n>=a){scrollIntoView(i,{top:THUMBNAIL_SCROLL_MARGIN})}}}document.getElementById("previous").disabled=n<=1;document.getElementById("next").disabled=n>=PDFView.pages.length},true);window.addEventListener("DOMMouseScroll",function(e){if(e.ctrlKey){e.preventDefault();var t=e.detail;var n=t>0?"zoomOut":"zoomIn";PDFView[n](Math.abs(t))}else if(PresentationMode.active){var r=-40;PDFView.mouseScroll(e.detail*r)}},false);window.addEventListener("click",function(t){if(!PresentationMode.active){if(SecondaryToolbar.isOpen&&PDFView.container.contains(t.target)){SecondaryToolbar.close()}}else if(t.button===0){t.preventDefault()}},false);window.addEventListener("keydown",function(t){if(PasswordPrompt.visible){return}var n=false;var r=(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0);if(r===1||r===8||r===5||r===12){switch(t.keyCode){case 70:if(!PDFView.supportsIntegratedFind){PDFFindBar.toggle();n=true}break;case 71:if(!PDFView.supportsIntegratedFind){PDFFindBar.dispatchEvent("again",r===5||r===12);n=true}break;case 61:case 107:case 187:case 171:PDFView.zoomIn();n=true;break;case 173:case 109:case 189:PDFView.zoomOut();n=true;break;case 48:case 96:setTimeout(function(){PDFView.parseScale(DEFAULT_SCALE,true)});n=false;break}}if(r===3||r===10){switch(t.keyCode){case 80:SecondaryToolbar.presentationModeClick();n=true;break}}if(n){t.preventDefault();return}var i=document.activeElement||document.querySelector(":focus");if(i&&(i.tagName.toUpperCase()==="INPUT"||i.tagName.toUpperCase()==="TEXTAREA"||i.tagName.toUpperCase()==="SELECT")){if(t.keyCode!==27){return}}var s=document.getElementById("toolbar");while(i){if(i===s&&!PresentationMode.active)return;i=i.parentNode}if(r===0){switch(t.keyCode){case 38:case 33:case 8:if(!PresentationMode.active&&PDFView.currentScaleValue!=="page-fit"){break};case 37:if(PDFView.isHorizontalScrollbarEnabled){break};case 75:case 80:PDFView.page--;n=true;break;case 27:if(SecondaryToolbar.isOpen){SecondaryToolbar.close();n=true}if(!PDFView.supportsIntegratedFind&&PDFFindBar.opened){PDFFindBar.close();n=true}break;case 40:case 34:case 32:if(!PresentationMode.active&&PDFView.currentScaleValue!=="page-fit"){break};case 39:if(PDFView.isHorizontalScrollbarEnabled){break};case 74:case 78:PDFView.page++;n=true;break;case 36:if(PresentationMode.active){PDFView.page=1;n=true}break;case 35:if(PresentationMode.active){PDFView.page=PDFView.pdfDocument.numPages;n=true}break;case 82:PDFView.rotatePages(90);break}}if(r===4){switch(t.keyCode){case 32:if(!PresentationMode.active&&PDFView.currentScaleValue!=="page-fit"){break}PDFView.page--;n=true;break;case 82:PDFView.rotatePages(-90);break}}if(r===2){switch(t.keyCode){case 37:if(PresentationMode.active){PDFHistory.back();n=true}break;case 39:if(PresentationMode.active){PDFHistory.forward();n=true}break}}if(n){t.preventDefault();PDFView.clearMouseScrollState()}});window.addEventListener("beforeprint",function(t){PDFView.beforePrint()});window.addEventListener("afterprint",function(t){PDFView.afterPrint()});(function(){var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){t()};PDFView.animationStartedPromise=new PDFJS.Promise;t(function(){PDFView.animationStartedPromise.resolve()})})()
